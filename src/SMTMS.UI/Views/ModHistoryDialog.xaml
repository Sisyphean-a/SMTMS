<Window x:Class="SMTMS.UI.Views.ModHistoryDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="模组历史记录" Height="550" Width="850"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0" Margin="0,0,0,10">
            <Run Text="历史记录: " FontWeight="Bold"/>
            <Run x:Name="ModNameTextBlock" Text="Mod Name"/>
        </TextBlock>

        <!-- 主内容区域：左右分栏 -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧：历史列表 -->
            <DataGrid Grid.Column="0"
                      x:Name="HistoryListView"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      BorderThickness="1"
                      BorderBrush="LightGray"
                      HeadersVisibility="Column"
                      SelectionChanged="HistoryListView_SelectionChanged">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="SHA" Binding="{Binding ShortHash}" Width="60"/>
                    <DataGridTextColumn Header="日期" Binding="{Binding FormattedDate}" Width="140"/>
                    <DataGridTextColumn Header="提交信息" Binding="{Binding Message}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- 分隔线 -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" Background="Transparent"/>

            <!-- 右侧：版本详情 -->
            <Border Grid.Column="2" BorderBrush="LightGray" BorderThickness="1">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <TextBlock Text="版本详情" FontWeight="Bold" Margin="0,0,0,10"/>

                        <!-- 模组名称 -->
                        <TextBlock Text="模组名称 (Name):" Margin="0,0,0,3"/>
                        <TextBox x:Name="NameTextBox"
                                 IsReadOnly="True"
                                 TextWrapping="Wrap"
                                 Margin="0,0,0,10"
                                 Padding="5"/>

                        <!-- 模组描述 -->
                        <TextBlock Text="模组描述 (Description):" Margin="0,0,0,3"/>
                        <TextBox x:Name="DescriptionTextBox"
                                 IsReadOnly="True"
                                 TextWrapping="Wrap"
                                 MinHeight="80"
                                 MaxHeight="150"
                                 VerticalScrollBarVisibility="Auto"
                                 Margin="0,0,0,10"
                                 Padding="5"/>

                        <!-- 版本号 -->
                        <TextBlock Text="版本号 (Version):" Margin="0,0,0,3"/>
                        <TextBox x:Name="VersionTextBox"
                                 IsReadOnly="True"
                                 Margin="0,0,0,10"
                                 Padding="5"/>

                        <!-- 作者 -->
                        <TextBlock Text="作者 (Author):" Margin="0,0,0,3"/>
                        <TextBox x:Name="AuthorTextBox"
                                 IsReadOnly="True"
                                 Padding="5"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <!-- 底部按钮 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="应用到编辑框"
                    Width="110"
                    Height="30"
                    Margin="0,0,10,0"
                    Click="ApplyToEditor_Click"
                    Padding="10,5"/>

            <Button Content="关闭"
                    Width="80"
                    Height="30"
                    Click="Close_Click"
                    IsCancel="True"
                    Padding="10,5"/>
        </StackPanel>
    </Grid>
</Window>
