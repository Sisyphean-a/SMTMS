# 星露谷物语模组翻译与管理系统 (SMTMS)

SMTMS (Stardew Mod Translation & Management System) 是一个专为《星露谷物语》玩家设计的**现代化翻译管理工具**。它提供了一套完整的模组汉化、管理与版本控制解决方案，致力于解决汉化易丢失、管理混乱、难以回溯等问题。

## 核心功能 (Core Features)

### 1. 🛡️ 增量历史快照 (Incremental Snapshots)
SMTMS 内置了一套基于 **SQLite** 的轻量级版本控制系统。
- **自动版本控制**：每次同步都会自动生成快照，记录模组的变更历史。
- **内容指纹 (Fingerprinting)**：利用 Hash 技术仅存储变更内容，高效且节省空间。
- **时光机**：支持查看任意历史版本的内容，并进行可视化差异比对。

### 2. 🔄 翻译提取与注入
- **归档 (Extract)**：一键扫描并提取现有模组中的汉化信息，存入本地数据库。
- **注入 (Restore)**：当模组更新导致 `manifest.json` 被覆盖时，可从数据库将汉化信息重新注入回文件中。

### 3. 📝 可视化管理与对比
- **实时编辑**：提供直观的界面修改模组名称和描述。
- **变更对比**：内置差异对比工具，精确展示“名称”、“描述”等字段在不同版本间的变化（新增、修改、删除）。
- **单模组历史**：支持查看单个模组的变更历史，并可将任意历史版本的汉化文案快速**应用**到当前编辑中。
- **状态追踪**：自动检测本地文件与数据库的差异，通过颜色标识变更状态。

---

## 技术架构 (Architecture)

SMTMS 采用基于 **.NET 8** 和 **Avalonia** 的 **MVVM** 架构，支持多平台（Windows, macOS, Linux），各模块职责清晰：

- **UI 层**：基于 **Avalonia UI** 和 **Semi Design** 构建，提供跨平台现代化交互体验。
- **业务核心 (Core)**：定义领域模型（如 `ModManifest`, `HistorySnapshot`）与服务接口。
- **数据层 (Data)**：基于 **EF Core** 和 **SQLite**，实现高性能的数据存储与快照管理。
- **翻译服务 (Translation)**：负责模组文件的解析、正则替换以及历史版本的构建。

> 仅仅依赖 **SQLite** 单一文件存储所有数据与历史，零外部环境依赖，开箱即用。

---

## 快速开始 (Getting Started)

1. **扫描模组**：启动程序，软件会自动定位游戏模组目录并加载列表。
2. **编辑汉化**：在列表中选中模组，修改右侧的中文名称或描述。
3. **同步保存**：点击 **“同步到数据库”**，系统将保存变更并创建一个新的历史快照。
4. **历史回滚**：如需撤销修改，进入 **“历史记录”** 页签，选择之前的快照点击 **“回滚”** 即可。

---

## 开发计划 (Roadmap)

- [x] 核心翻译管理与注入功能
- [x] 基于 SQLite 的增量历史版本控制
- [x] 字段级差异可视化 (Diff)
- [ ] **AI 辅助翻译**：集成 LLM API 实现自动汉化。
- [ ] **Nexus Mods 集成**：自动获取元数据与更新检测。
- [x] **跨平台重构**：从 WPF 迁移到 Avalonia，支持 Windows/macOS/Linux。

---

> _"让模组管理回归简单，让翻译成果不再丢失。"_
